{% extends "layouts/base-presentation.html" %}

{% block content %}
  <style>
    .page-header {
      padding: 300px;
    }
  </style>
  <div class="page-header section-height-100 relative" style="background-image: url('{{ ASSETS_ROOT }}/img/background3.jpg')">
    <div class="container-fluid">
      <div class="row">
        <div class="col-lg-9 z-index-2 border-radius-xl mt-n10 mx-auto py-3 blur shadow-blur">
          <div class="row">
            <h2>
              {{ task.name }}
              <a href="{% url 'task_manager:task-delete' pk=task.id %}" class="btn btn-danger btn-round d-inline">
                Delete
              </a>

              <a href="{% url 'task_manager:task-update' pk=task.id %}" class="btn btn-secondary btn-round d-inline">
                Update
              </a>
            </h2>
            <p><strong>Type:</strong> ({{ task.task_type.name }})</p>
            <p><strong>Description: </strong>{{ task.description }}</p>
            <p><strong>Deadline: </strong>{{ task.deadline }}</p>
            <p><strong>Priority: </strong>{{ task.priority }}</p>
            <p><strong>Is completed: </strong>{{ task.is_completed}}</p>
            <h2>
              Assignees

              {% if task in user.tasks.all %}
                <a href="{% url 'task_manager:toggle-task-assign' pk=task.id %}" class="btn btn-danger btn-round d-inline">
                  Refuse the task
                </a>
              {% else %}
                <a href="{% url 'task_manager:toggle-task-assign' pk=task.id %}" class="btn btn-success btn-round d-inline">
                  Take this task
                </a>
              {% endif %}

            </h2>
            <hr>
            <ul>
              {% for worker in task.assignees.all %}
                <li>{{ worker.username }} ({{ worker.first_name }} {{ worker.last_name }})</li>
              {% endfor %}
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
